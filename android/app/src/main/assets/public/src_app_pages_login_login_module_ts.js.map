{"version":3,"file":"src_app_pages_login_login_module_ts.js","mappings":"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","sources":["./src/app/pages/login/login-routing.module.ts","./src/app/pages/login/login.module.ts","./src/app/pages/login/login.page.ts","./src/app/services/auth/auth-google.service.ts","./src/app/pages/login/login.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { LoginPage } from './login.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LoginPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class LoginPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { LoginPageRoutingModule } from './login-routing.module';\r\n\r\nimport { LoginPage } from './login.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    LoginPageRoutingModule\r\n  ],\r\n  declarations: [LoginPage]\r\n})\r\nexport class LoginPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { NavigationExtras, Router } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport { AuthGoogleService } from 'src/app/services/auth/auth-google.service';\r\nimport { of } from 'rxjs'\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss'],\r\n})\r\nexport class LoginPage implements OnInit {\r\n\r\n  nombre: string;\r\n  contrasena: string;\r\n  email: string;\r\n  password: string;\r\n\r\n  usuarioKey: string;\r\n\r\n  constructor(private router: Router,\r\n    private auth: AuthGoogleService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  //Metodo para Validar Usuario\r\n  validarUsuario(){\r\n    console.log(this.nombre+this.contrasena)\r\n    this.router.navigate(['principal'], { queryParams: { id: '' } });\r\n  }\r\n\r\n  onSubmitLogin()\r\n  {\r\n    var id: any;\r\n\r\n    this.auth.login()\r\n    .then((data) => {\r\n        \r\n        id = data;\r\n        this.router.navigate(['principal'], { queryParams: { id: data } });\r\n        \r\n    })\r\n    .catch((ex) => {\r\n        console.log(ex);\r\n    });\r\n    \r\n      \r\n  }\r\n\r\n \r\n\r\n  logout() {\r\n    this.auth.logout();\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AngularFireAuth } from '@angular/fire/compat/auth';\r\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\r\nimport firebase from 'firebase/compat/app';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthGoogleService {\r\n  credential: string;\r\n\r\n  constructor(public auth: AngularFireAuth,\r\n    private afs: AngularFirestore) { }\r\n\r\n  async loginGoogle() {\r\n    //this.auth.signInWithPopup(new firebase.auth.GoogleAuthProvider());\r\n    \r\n    \r\n    return this.credential;\r\n    \r\n  }\r\n\r\n  login(){\r\n\r\n    //return una promesa\r\n    return new Promise((resolve, rejected) =>{\r\n      this.auth.signInWithPopup(new firebase.auth.GoogleAuthProvider()).then(user => {\r\n        //console.log(user.user);\r\n        let userr =JSON.parse(JSON.stringify(user.user));\r\n        this.credential = userr.uid;\r\n        //console.log(userr.uid);\r\n        this.loginGoogle();\r\n        this.updateDtaUser(userr);\r\n        resolve(userr);\r\n        \r\n      }).catch(err => rejected(err));\r\n    });   \r\n}\r\n\r\n  logout() {\r\n    this.auth.signOut();\r\n  }\r\n\r\n  updateDtaUser(user: any) {\r\n    const refUsers = this.afs.collection('users');\r\n\r\n    if(user.uid == null){\r\n      user.uid = this.afs.createId();\r\n    }\r\n\r\n    const data = {\r\n      uid: user.uid,\r\n      email: user.email || null,\r\n      displayName: user.displayName,\r\n      photoURL: user.PhotoURL || \"https://goo.gl/7kz9qG\",\r\n      provider: user.providerData[0].providerId,\r\n      lastLogin: new Date(Number(user.lastLoginAt)) || null,\r\n      createAt: new Date(Number(user.createdAt)) || null\r\n\r\n    }\r\n    refUsers.doc(user.uid).set(user);\r\n  }\r\n\r\n}\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>CuencaPelis+ Login</ion-title>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"principal\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n\\r\\n  <!--Inputs Entrada de datos  Correo y Contrasena-->\\r\\n  <div>\\r\\n    <ion-grid>\\r\\n      <ion-row>\\r\\n        <ion-col size=\\\"2\\\">\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"7\\\">\\r\\n          <div >\\r\\n            <img id=\\\"imagenLogin\\\" src=\\\"https://img.icons8.com/external-flat-icons-inmotus-design/67/000000/external-avatar-messenger-flat-icons-inmotus-design.png\\\"/>\\r\\n          </div>\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"3\\\"> \\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n    </ion-grid>\\r\\n\\r\\n    <div id=\\\"centrarInput\\\">\\r\\n      <ion-item>\\r\\n        <ion-label position=\\\"floating\\\">Correo</ion-label>\\r\\n        <ion-input [(ngModel)]=\\\"nombre\\\"></ion-input>\\r\\n      </ion-item>\\r\\n    </div>\\r\\n  \\r\\n    <div id=\\\"centrarInput\\\">\\r\\n      <ion-item>\\r\\n        <ion-label position=\\\"floating\\\" >Contrasena</ion-label>\\r\\n        <ion-input type=\\\"password\\\" [(ngModel)]=\\\"contrasena\\\"></ion-input>\\r\\n      </ion-item>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <!--Boton para aceptar la entrada de datos-->\\r\\n  <div id=\\\"centrarBoton\\\">\\r\\n    <ion-button  expand=\\\"block\\\" color=\\\"danger\\\" (click)=\\\"validarUsuario()\\\">Log In</ion-button>\\r\\n  </div>\\r\\n  <div >\\r\\n    <ion-grid >\\r\\n      <ion-row>\\r\\n        <ion-col>\\r\\n        </ion-col>\\r\\n        <ion-col>\\r\\n         <div >\\r\\n          <img class=\\\"google\\\" (click)=\\\"onSubmitLogin()\\\" src=\\\"https://cdn-icons.flaticon.com/png/512/2875/premium/2875435.png?token=exp=1644792790~hmac=b9fbd7b10cf14e2926c97a02348242ab\\\">\\r\\n          \\r\\n         </div>\\r\\n        </ion-col>\\r\\n        <ion-col>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n    </ion-grid>\\r\\n\\r\\n  </div>\\r\\n  \\r\\n \\r\\n\\r\\n\\r\\n</ion-content>\\r\\n\";"],"names":[],"sourceRoot":"webpack:///"}